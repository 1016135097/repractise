#Repractise重构篇: 重构CMS

重构系统是一项非常具有挑战性的事情。通常来说，在我们的系统是第二个系统的时候才需要重构，即这个系统本身已经很臃肿。我们花费了太量的时间在代码间的逻辑，开发新的功能变得越来越慢。这不仅仅可能只是因为我们之前的架构没有设计好，而且在我们开发的过程中没有保持着原先设计时的一些原则。如果是这样的情况，那么这就是一个复杂的过程。

还有一种情况是我们发现了一种更符合我们当前业务的框架。

##CMS

越来越多的开发人员开始在使用Github Pages作为他们的博客，这是一个很有意思的转变。主要的原因是这是免费的，并且基本上可以保证24x7小时是可用的——当且仅当Github发现故障的时候才会不可访问。

###CMS简介

CMS是Content Management System的缩写，意为"内容管理系统".它可以做很多的事情，但是总的来说就是Page和Blog——即我们要创建一些页面可以用于写一些About US、Contact Me，以及持续更新的博客或者新闻，以及其他子系统——通常更新不活跃。通过对这些博客或者新闻进行分类，我们就可以有不同的信息内容，如下图：

![不同分类的内容](http://repractise.phodal.com/img/cms/cms-blogs.jpg)

CMS是政府和企业都需要的系统，他们有很多的信息需要公开，并且需要对其组织进行宣传。在我有限的CMS交付经验里（大学时期），一般第一次交付CMS的时候，已经创建了大部分页面。有时候这些页面可能直接存储在数据库中，后来发现这不是一个好的方案，于是很多页面变成了静态页面。随后，在CMS的生命周期里就是更新内容。

因而，CMS中起其主导的东西还是Content，即内容。而内容是一些持续可变的东西。这也就是为什么WordPress这么流行于CMS界，它是一个博客系统，但是多数时候我们只需要更新内容。除此不得不提及的一个CMS框架是Drupal，两者一对比会发现Drupal比较强大。通常来说，强大的一个负作用就是——复杂。

WordPress和Drupal这一类的系统都属于发布系统，而其后台可以称为编辑系统。

一般来说CMS有下面的特点：
 
 - 支持多用户。
 - 角色控制-内容管理。如InfoQ的编辑后台就会有这样的机制，社区编辑负责创建内容，而审核发布则是另外的人做的。
 - 插件管理。如WordPress和Drupal在这一方面就很强大，基本可以满足日常的需要。
 - 快捷简便地存储内容。简单地来说就是所见即所得编辑器，但是对于开发者来说，Markdown似乎是好的选择。
 - 预发布。这是一个很重要的特性，特别是如果你的系统后台没有相对应的预览机制。
 - 子系统。由于这属于定制化的系统，并不方便进行总结。
 - ...

CMS一直就是这样一个紧耦合的系统。下图似乎是Drupal的模块图

![Drupal 框架](http://repractise.phodal.com/img/cms/drupal-modular.png)

###CMS架构与Django

说起，我一直是一个CMS党。主要原因还在于我可以随心所欲地去修改网站的内容，修改网站的架构。我一直在使用一个名为Django的Python Web框架，它是一个MTV框架，从框架本身来上看它和别的系统没有太大的区别。

![Django Architecture](http://repractise.phodal.com/img/cms/django-architecture.png)

但是如果我们已经有多外模块（即Django中app的概念），那么系统的架构就有所不同了。

![Django App架构 ](http://repractise.phodal.com/img/cms/django-apps.jpg)

##静态站点生成器


